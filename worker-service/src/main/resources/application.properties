# =============================================================================
# Worker Service Configuration
# =============================================================================
# This file imports centralized config from config.yaml
# Configuration priority: env vars > config.yaml > application.properties
# =============================================================================

# Import externalized centralized configuration
spring.config.import=optional:file:./config.yaml

# -----------------------------------------------------------------------------
# Server Configuration
# -----------------------------------------------------------------------------
server.port=8082
spring.application.name=worker-service

# -----------------------------------------------------------------------------
# Kafka Configuration (from centralized config)
# -----------------------------------------------------------------------------
spring.kafka.bootstrap-servers=kafka:29092
spring.kafka.consumer.bootstrap-servers=kafka:29092
spring.kafka.consumer.auto-offset-reset=earliest
spring.kafka.consumer.group-id=csv-workers
spring.kafka.consumer.enable-auto-commit=false

# Kafka Topics
kafka.topic=csv-jobs
kafka.dlq.topic=csv-jobs-dlq

# -----------------------------------------------------------------------------
# Common JobStore Service Configuration
# -----------------------------------------------------------------------------
job.status.url=http://common-jobstore-service:8084

# Job Status Client Retry Configuration
job.status.retry.max_attempts=5
job.status.retry.delay_ms=500

# -----------------------------------------------------------------------------
# File Storage Configuration
# -----------------------------------------------------------------------------
file.raw.dir=/data/raw
file.processed.dir=/data/processed

# -----------------------------------------------------------------------------
# CSV Processing Configuration
# -----------------------------------------------------------------------------
csv.batch.size=1000
csv.email.pattern=[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}

# -----------------------------------------------------------------------------
# Retry Configuration (Exponential BackOff for Kafka Consumer)
# -----------------------------------------------------------------------------
worker.retry.max_attempts=5
worker.retry.initial_interval_ms=1000
worker.retry.multiplier=2.0
worker.retry.max_interval_ms=10000

# -----------------------------------------------------------------------------
# Logging Configuration
# -----------------------------------------------------------------------------
logging.level.root=INFO
logging.level.com.example=DEBUG
logging.level.org.springframework.kafka=INFO
logging.level.org.apache.kafka=WARN
